{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","ComponentManager","permissions","onReady","sentMessages","messageQueue","loggingEnabled","onReadyCallback","window","addEventListener","event","console","log","data","handleMessage","bind","payload","action","sessionKey","componentData","activateThemes","themes","original","originalMessage","filter","message","messageId","callback","postMessage","key","value","push","generateUUID","api","sentMessage","JSON","parse","stringify","parent","type","width","height","content_types","tags","items","item","jsonObjectForItem","associateItem","content_type","deleteItems","params","map","saveItems","copy","Object","assign","children","urls","deactivateAllCustomThemes","url","link","document","createElement","href","rel","media","className","getElementsByTagName","appendChild","elements","getElementsByClassName","forEach","element","disabled","parentNode","removeChild","crypto","msCrypto","buf","Uint32Array","getRandomValues","idx","replace","c","v","toString","d","Date","getTime","performance","now","uuid","Math","random","floor","angular","HomeCtrl","$rootScope","$scope","$timeout","name","componentManager","formData","defaultHeight","analyzeNote","text","note","content","wordCount","countWords","paragraphCount","split","characterCount","timeToRead","timeInt","round","readTime","noun","created_at","toLocaleString","updated_at","streamContextItem","setSize","buttonPressed","title","createItem","copyNoteToClipboard","downloadText","location","encodeURIComponent","body","textarea","css","position","opacity","val","append","select","successful","execCommand","copied","err","error","toCopy","remove","filename","pom","setAttribute","createEvent","initEvent","dispatchEvent","click","$$ngIsClass","controller"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nclass ComponentManager {\n\n  constructor(permissions, onReady) {\n    this.sentMessages = [];\n    this.messageQueue = [];\n    this.permissions = permissions;\n    this.loggingEnabled = false;\n    this.onReadyCallback = onReady;\n\n    window.addEventListener(\"message\", function (event) {\n      if (this.loggingEnabled) {\n        console.log(\"Components API Message received:\", event.data);\n      }\n      this.handleMessage(event.data);\n    }.bind(this), false);\n  }\n\n  handleMessage(payload) {\n    if (payload.action === \"component-registered\") {\n      this.sessionKey = payload.sessionKey;\n      this.componentData = payload.componentData;\n      this.onReady();\n\n      if (this.loggingEnabled) {\n        console.log(\"Component successfully registered with payload:\", payload);\n      }\n    } else if (payload.action === \"themes\") {\n      this.activateThemes(payload.data.themes);\n    } else if (payload.original) {\n      // get callback from queue\n      var originalMessage = this.sentMessages.filter(function (message) {\n        return message.messageId === payload.original.messageId;\n      })[0];\n\n      if (originalMessage.callback) {\n        originalMessage.callback(payload.data);\n      }\n    }\n  }\n\n  onReady() {\n    for (var message of this.messageQueue) {\n      this.postMessage(message.action, message.data, message.callback);\n    }\n    this.messageQueue = [];\n\n    if (this.onReadyCallback) {\n      this.onReadyCallback();\n    }\n  }\n\n  setComponentDataValueForKey(key, value) {\n    this.componentData[key] = value;\n    this.postMessage(\"set-component-data\", { componentData: this.componentData }, function (data) {});\n  }\n\n  clearComponentData() {\n    this.componentData = {};\n    this.postMessage(\"set-component-data\", { componentData: this.componentData }, function (data) {});\n  }\n\n  componentDataValueForKey(key) {\n    return this.componentData[key];\n  }\n\n  postMessage(action, data, callback) {\n    if (!this.sessionKey) {\n      this.messageQueue.push({\n        action: action,\n        data: data,\n        callback: callback\n      });\n      return;\n    }\n\n    var message = {\n      action: action,\n      data: data,\n      messageId: this.generateUUID(),\n      sessionKey: this.sessionKey,\n      permissions: this.permissions,\n      api: \"component\"\n    };\n\n    var sentMessage = JSON.parse(JSON.stringify(message));\n    sentMessage.callback = callback;\n    this.sentMessages.push(sentMessage);\n\n    if (this.loggingEnabled) {\n      console.log(\"Posting message:\", message);\n    }\n\n    window.parent.postMessage(message, '*');\n  }\n\n  setSize(type, width, height) {\n    this.postMessage(\"set-size\", { type: type, width: width, height: height }, function (data) {});\n  }\n\n  streamItems(callback) {\n    this.postMessage(\"stream-items\", { content_types: [\"Tag\"] }, function (data) {\n      var tags = data.items;\n      callback(tags);\n    }.bind(this));\n  }\n\n  streamContextItem(callback) {\n    this.postMessage(\"stream-context-item\", null, function (data) {\n      var item = data.item;\n      callback(item);\n    }.bind(this));\n  }\n\n  selectItem(item) {\n    this.postMessage(\"select-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  createItem(item) {\n    this.postMessage(\"create-item\", { item: this.jsonObjectForItem(item) }, function (data) {\n      var item = data.item;\n      this.associateItem(item);\n    }.bind(this));\n  }\n\n  associateItem(item) {\n    this.postMessage(\"associate-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  deassociateItem(item) {\n    this.postMessage(\"deassociate-item\", { item: this.jsonObjectForItem(item) });\n  }\n\n  clearSelection() {\n    this.postMessage(\"clear-selection\", { content_type: \"Tag\" });\n  }\n\n  deleteItem(item) {\n    this.deleteItems([item]);\n  }\n\n  deleteItems(items) {\n    var params = {\n      items: items.map(function (item) {\n        return this.jsonObjectForItem(item);\n      }.bind(this))\n    };\n    this.postMessage(\"delete-items\", params);\n  }\n\n  saveItem(item) {\n    this.saveItems([item]);\n  }\n\n  saveItems(items) {\n    items = items.map(function (item) {\n      return this.jsonObjectForItem(item);\n    }.bind(this));\n\n    this.postMessage(\"save-items\", { items: items }, function (data) {});\n  }\n\n  jsonObjectForItem(item) {\n    var copy = Object.assign({}, item);\n    copy.children = null;\n    copy.parent = null;\n    return copy;\n  }\n\n  /* Themes */\n\n  activateThemes(urls) {\n    this.deactivateAllCustomThemes();\n\n    if (this.loggingEnabled) {\n      console.log(\"Activating themes:\", urls);\n    }\n\n    if (!urls) {\n      return;\n    }\n\n    for (var url of urls) {\n      if (!url) {\n        continue;\n      }\n\n      var link = document.createElement(\"link\");\n      link.href = url;\n      link.type = \"text/css\";\n      link.rel = \"stylesheet\";\n      link.media = \"screen,print\";\n      link.className = \"custom-theme\";\n      document.getElementsByTagName(\"head\")[0].appendChild(link);\n    }\n  }\n\n  deactivateAllCustomThemes() {\n    var elements = document.getElementsByClassName(\"custom-theme\");\n\n    [].forEach.call(elements, function (element) {\n      if (element) {\n        element.disabled = true;\n        element.parentNode.removeChild(element);\n      }\n    });\n  }\n\n  /* Utilities */\n\n  generateUUID() {\n    var crypto = window.crypto || window.msCrypto;\n    if (crypto) {\n      var buf = new Uint32Array(4);\n      crypto.getRandomValues(buf);\n      var idx = -1;\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        idx++;\n        var r = buf[idx >> 3] >> idx % 8 * 4 & 15;\n        var v = c == 'x' ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n      });\n    } else {\n      var d = new Date().getTime();\n      if (window.performance && typeof window.performance.now === \"function\") {\n        d += performance.now(); //use high-precision timer if available\n      }\n      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n      });\n      return uuid;\n    }\n  }\n}\n\nwindow.ComponentManager = ComponentManager;\n\n\n},{}]},{},[1]);\n;'use strict';\n\nangular.module('app', [\n\n])\n;class HomeCtrl {\n  constructor($rootScope, $scope, $timeout) {\n\n    var permissions = [\n      {\n        name: \"stream-context-item\"\n      }\n    ]\n\n    let componentManager = new window.ComponentManager(permissions, function(){\n      // on ready\n    });\n    componentManager.loggingEnabled = false;\n\n    $scope.formData = {};\n    let defaultHeight = 56;\n\n\n    $scope.analyzeNote = function() {\n      var text = $scope.note.content.text;\n      $scope.wordCount = countWords(text);\n      $scope.paragraphCount = text.replace(/\\n$/gm, '').split(/\\n/).length;\n      $scope.characterCount = text.length;\n\n      var timeToRead = $scope.wordCount / 200;\n      var timeInt = Math.round(timeToRead);\n      if(timeInt == 0) {\n        $scope.readTime = \"< 1 minute\"\n      } else {\n        var noun = timeInt == 1 ? \"minute\" : \"minutes\";\n        $scope.readTime = `${timeInt} ${noun}`;\n      }\n\n      $scope.note.created_at = new Date($scope.note.created_at).toLocaleString();\n      $scope.note.updated_at = new Date($scope.note.updated_at).toLocaleString();\n    }\n\n    componentManager.streamContextItem(function(item){\n      $timeout(function(){\n        $scope.note = item;\n        $scope.analyzeNote();\n      })\n    })\n\n    componentManager.setSize(\"container\", \"100%\", defaultHeight);\n\n    $scope.buttonPressed = function(action) {\n      switch (action) {\n        case \"duplicate\":\n          var copy = JSON.parse(JSON.stringify($scope.note));\n          copy.content.title += \" (copy)\";\n          copy.created_at = new Date();\n          copy.updated_at = new Date();\n          copy.uuid = null;\n          componentManager.createItem(copy);\n          break;\n        case \"copy\":\n          $scope.copyNoteToClipboard();\n          break;\n        case \"save\":\n          downloadText($scope.note.content.title, $scope.note.content.text);\n          break;\n        case \"email\":\n          window.location.href = `mailto:?subject=${$scope.note.content.title}&body=${encodeURIComponent($scope.note.content.text)}`\n          break;\n\n      }\n    }\n\n    $scope.copyNoteToClipboard = function() {\n        var body = angular.element(document.body);\n        var textarea = angular.element('<textarea/>');\n        textarea.css({\n            position: 'fixed',\n            opacity: '0'\n        });\n\n        textarea.val($scope.note.content.text);\n        body.append(textarea);\n        textarea[0].select();\n\n        try {\n          var successful = document.execCommand('copy');\n          if (!successful) throw successful;\n          $scope.copied = true;\n          $timeout(function(){\n            $scope.copied = false;\n          }, 1000)\n        } catch (err) {\n          console.error(\"Failed to copy\", toCopy);\n        }\n\n        textarea.remove();\n    }\n  }\n}\n\nfunction countWords(s){\n  s = s.replace(/(^\\s*)|(\\s*$)/gi,\"\");//exclude  start and end white-space\n  s = s.replace(/[ ]{2,}/gi,\" \");//2 or more space to 1\n  s = s.replace(/\\n /,\"\\n\"); // exclude newline with a start spacing\n  return s.split(' ').length;\n}\n\nfunction downloadText(filename, text) {\n    var pom = document.createElement('a');\n    pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    pom.setAttribute('download', filename);\n\n    if (document.createEvent) {\n        var event = document.createEvent('MouseEvents');\n        event.initEvent('click', true, true);\n        pom.dispatchEvent(event);\n    }\n    else {\n        pom.click();\n    }\n}\n\n// required for firefox\nHomeCtrl.$$ngIsClass = true;\n\nangular.module('app').controller('HomeCtrl', HomeCtrl);\n"]}