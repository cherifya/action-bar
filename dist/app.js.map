{"version":3,"sources":["app.js"],"names":["angular","module","HomeCtrl","constructor","$rootScope","$scope","$timeout","componentManager","window","ComponentManager","formData","defaultHeight","analyzeNote","text","note","content","wordCount","countWords","paragraphCount","replace","split","length","characterCount","timeToRead","timeInt","Math","round","readTime","noun","created_at","Date","toLocaleString","updated_at","streamContextItem","item","setSize","buttonPressed","action","copy","JSON","parse","stringify","uuid","createItem","copyNoteToClipboard","downloadText","title","location","href","encodeURIComponent","body","element","document","textarea","css","position","opacity","val","append","select","successful","execCommand","copied","err","console","log","toCopy","remove","s","filename","pom","createElement","setAttribute","createEvent","event","initEvent","dispatchEvent","click","$$ngIsClass","controller"],"mappings":"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","file":"app.js","sourcesContent":["'use strict';\n\nangular.module('app', [\n\n])\n;class HomeCtrl {\n  constructor($rootScope, $scope, $timeout) {\n\n    let componentManager = new window.ComponentManager();\n\n    $scope.formData = {};\n    let defaultHeight = 56;\n\n\n    $scope.analyzeNote = function() {\n      var text = $scope.note.content.text;\n      $scope.wordCount = countWords(text);\n      $scope.paragraphCount = text.replace(/\\n$/gm, '').split(/\\n/).length;\n      $scope.characterCount = text.length;\n\n      var timeToRead = $scope.wordCount / 200;\n      var timeInt = Math.round(timeToRead);\n      if(timeInt == 0) {\n        $scope.readTime = \"< 1 minute\"\n      } else {\n        var noun = timeInt == 1 ? \"minute\" : \"minutes\";\n        $scope.readTime = `${timeInt} ${noun}`;\n      }\n\n      $scope.note.created_at = new Date($scope.note.created_at).toLocaleString();\n      $scope.note.updated_at = new Date($scope.note.updated_at).toLocaleString();\n    }\n\n    componentManager.streamContextItem(function(item){\n      $timeout(function(){\n        $scope.note = item;\n        $scope.analyzeNote();\n      })\n    })\n\n    componentManager.setSize(\"container\", \"100%\", defaultHeight);\n\n    $scope.buttonPressed = function(action) {\n      switch (action) {\n        case \"duplicate\":\n          var copy = JSON.parse(JSON.stringify($scope.note));\n          copy.uuid = null;\n          componentManager.createItem(copy);\n          break;\n        case \"copy\":\n          $scope.copyNoteToClipboard();\n          break;\n        case \"save\":\n          downloadText($scope.note.content.title, $scope.note.content.text);\n          break;\n        case \"email\":\n          window.location.href = `mailto:?subject=${$scope.note.content.title}&body=${encodeURIComponent($scope.note.content.text)}`\n          break;\n\n      }\n    }\n\n    $scope.copyNoteToClipboard = function() {\n        var body = angular.element(document.body);\n        var textarea = angular.element('<textarea/>');\n        textarea.css({\n            position: 'fixed',\n            opacity: '0'\n        });\n\n        textarea.val($scope.note.content.text);\n        body.append(textarea);\n        textarea[0].select();\n\n        try {\n          var successful = document.execCommand('copy');\n          if (!successful) throw successful;\n          $scope.copied = true;\n          $timeout(function(){\n            $scope.copied = false;\n          }, 1000)\n        } catch (err) {\n          console.log(\"failed to copy\", toCopy);\n        }\n\n        textarea.remove();\n    }\n  }\n}\n\nfunction countWords(s){\n  s = s.replace(/(^\\s*)|(\\s*$)/gi,\"\");//exclude  start and end white-space\n  s = s.replace(/[ ]{2,}/gi,\" \");//2 or more space to 1\n  s = s.replace(/\\n /,\"\\n\"); // exclude newline with a start spacing\n  return s.split(' ').length;\n}\n\nfunction downloadText(filename, text) {\n    var pom = document.createElement('a');\n    pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    pom.setAttribute('download', filename);\n\n    if (document.createEvent) {\n        var event = document.createEvent('MouseEvents');\n        event.initEvent('click', true, true);\n        pom.dispatchEvent(event);\n    }\n    else {\n        pom.click();\n    }\n}\n\n// required for firefox\nHomeCtrl.$$ngIsClass = true;\n\nangular.module('app').controller('HomeCtrl', HomeCtrl);\n"]}